import{j as R}from"./jsx-runtime-D_zvdyIk.js";import{r as o}from"./index-BE4Fbmwm.js";const S=o.createContext(void 0),m={pomodoro:25*60,short_break:5*60,long_break:15*60},p="pomodoro-tasks",_=({children:r})=>{const[i,f]=o.useState("pomodoro"),[P,s]=o.useState(!1),[g,n]=o.useState(m.pomodoro),[d,l]=o.useState(()=>{const e=localStorage.getItem(p);try{return e?JSON.parse(e):[]}catch{return[]}}),[c,x]=o.useState(()=>{const e=localStorage.getItem("global-pomodoros");try{return e?JSON.parse(e):[]}catch{return[]}}),[C,E]=o.useState(0),[a,T]=o.useState(null),h=()=>{n(m[i]),s(!1)},v=e=>{f(e),n(m[e]),s(!1)},I=()=>{a&&l(e=>e.map(t=>{if(t.id!==a)return t;const u=t.completedPomodoros+1,N=u>=t.pomodoros;return{...t,completedPomodoros:u,completed:N?!0:t.completed}}))};return o.useEffect(()=>{localStorage.setItem(p,JSON.stringify(d))},[d]),o.useEffect(()=>{localStorage.setItem("global-pomodoros",JSON.stringify(c))},[c]),R.jsx(S.Provider,{value:{mode:i,setMode:v,isRunning:P,setIsRunning:s,timeLeft:g,setTimeLeft:n,resetTimer:h,tasks:d,setTasks:l,pomodoroCount:C,setPomodoroCount:E,activeTaskId:a,setActiveTaskId:T,incrementCompletedPomodoros:I,globalPomodoros:c,setGlobalPomodoros:x},children:r})},O=()=>{const r=o.useContext(S);if(!r)throw new Error("usePomodoroContext must be used within PomodoroProvider");return r};_.__docgenInfo={description:"",methods:[],displayName:"PomodoroProvider",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};export{_ as P,O as u};
