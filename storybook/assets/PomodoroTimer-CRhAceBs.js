import{j as o}from"./jsx-runtime-D_zvdyIk.js";import{M as j}from"./ModeSwitcher-B-sdEYCP.js";import{p as P,T as b}from"./TimerControls-DTDrY2vf.js";import{T as k}from"./TimerDisplay-X4n2myQT.js";import{T as y}from"./Text-D4pPwyNi.js";import{I as v}from"./InfoTooltip-CSQAauK_.js";import{u as R}from"./PomodoroContext-BAX-qwHT.js";import{r}from"./index-D4lIrffr.js";const I="_container_lrz2q_1",C="_titleRow_lrz2q_9",p={container:I,titleRow:C};function L(e,t=Date.now()){return Math.round(((e??t)-t)/1e3)}const M=()=>{const{isRunning:e,setIsRunning:t,setTimeLeft:n,timeLeft:x,mode:i,setMode:u,pomodoroCount:T,setPomodoroCount:_,incrementCompletedPomodoros:h}=R(),s=r.useRef(null),m=r.useRef(!1),c=r.useRef(!1),f=r.useRef(null),l=()=>{s.current&&(clearInterval(s.current),s.current=null)},g=()=>{if(i==="pomodoro"){const a=T+1;_(a),u(a%4===0?"long_break":"short_break")}else u("pomodoro")};r.useEffect(()=>{if(l(),e){const a=Date.now(),w=x;f.current=a+w*1e3,m.current=!1,c.current=!1,s.current=setInterval(()=>{const d=L(f.current,Date.now());if(d<=0){m.current||(P(),m.current=!0),Notification.permission==="granted"&&new Notification("Time's up!",{body:i==="pomodoro"?"Take a short break!":"Ready to focus? Start your next Pomodoro!"}),!c.current&&i==="pomodoro"&&(h(),c.current=!0),l(),n(0),t(!1),g();return}n(d)},1e3)}return l},[e])},N=()=>{M();const{timeLeft:e,mode:t}=R(),n={pomodoro:"Pomodoro",short_break:"Short Break",long_break:"Long Break"}[t];return o.jsxs("div",{className:p.container,children:[o.jsx(j,{}),o.jsxs("div",{className:p.titleRow,children:[o.jsx(y,{variant:"label",children:n}),o.jsx(v,{})]}),o.jsx(k,{time:e}),o.jsx(b,{})]})};N.__docgenInfo={description:"",methods:[],displayName:"PomodoroTimer"};export{N as P};
