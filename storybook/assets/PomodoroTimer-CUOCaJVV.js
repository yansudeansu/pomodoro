import{j as o}from"./jsx-runtime-D_zvdyIk.js";import{M as w}from"./ModeSwitcher-B-sdEYCP.js";import{p as P,T as v}from"./TimerControls-D2rboRqj.js";import{T as I}from"./TimerDisplay-X4n2myQT.js";import{T as b}from"./Text-D4pPwyNi.js";import{I as k}from"./InfoTooltip-CSQAauK_.js";import{u as R}from"./PomodoroContext-BAX-qwHT.js";import{r as t}from"./index-D4lIrffr.js";const C="_container_lrz2q_1",y="_titleRow_lrz2q_9",p={container:C,titleRow:y};function L(e,r=Date.now()){return Math.round(((e??r)-r)/1e3)}const M=()=>{const{isRunning:e,setIsRunning:r,setTimeLeft:n,timeLeft:x,mode:l,setMode:u,pomodoroCount:T,setPomodoroCount:_,incrementCompletedPomodoros:h}=R(),s=t.useRef(null),i=t.useRef(!1),m=t.useRef(!1),f=t.useRef(null),c=()=>{s.current&&(clearInterval(s.current),s.current=null)},g=()=>{if(l==="pomodoro"){const a=T+1;_(a),u(a%4===0?"long_break":"short_break")}else u("pomodoro")};t.useEffect(()=>{if(c(),e){const a=Date.now(),j=x;f.current=a+j*1e3,i.current=!1,m.current=!1,s.current=setInterval(()=>{const d=L(f.current,Date.now());if(d<=0){i.current||(P(),i.current=!0),!m.current&&l==="pomodoro"&&(h(),m.current=!0),c(),n(0),r(!1),g();return}n(d)},1e3)}return c},[e])},D=()=>{M();const{timeLeft:e,mode:r}=R(),n={pomodoro:"Pomodoro",short_break:"Short Break",long_break:"Long Break"}[r];return o.jsxs("div",{className:p.container,children:[o.jsx(w,{}),o.jsxs("div",{className:p.titleRow,children:[o.jsx(b,{variant:"label",children:n}),o.jsx(k,{})]}),o.jsx(I,{time:e}),o.jsx(v,{})]})};D.__docgenInfo={description:"",methods:[],displayName:"PomodoroTimer"};export{D as P};
