import{j as c}from"./jsx-runtime-D_zvdyIk.js";import{c as g}from"./compiler-runtime-CJbQ6yvW.js";import{M as w}from"./ModeSwitcher-Cj85XKe7.js";import{p as j,T as P}from"./TimerControls-C27iG0Sy.js";import{T as k}from"./TimerDisplay-vjCVDni9.js";import{T as S}from"./Text-C1JEmKLm.js";import{I as v}from"./InfoTooltip-2yzUiI5t.js";import{u as T}from"./PomodoroContext-CSqZrOks.js";import{r as u}from"./index-BvYGlo5U.js";const I="_container_6qrrh_1",C="_titleRow_6qrrh_9",x={container:I,titleRow:C};function L(e,t=Date.now()){return Math.round(((e??t)-t)/1e3)}const M=()=>{const{isRunning:e,setIsRunning:t,setTimeLeft:d,timeLeft:l,mode:a,setMode:m,pomodoroCount:r,setPomodoroCount:f,incrementCompletedPomodoros:n}=T(),o=u.useRef(null),s=u.useRef(!1),i=u.useRef(!1),R=u.useRef(null),_=()=>{o.current&&(clearInterval(o.current),o.current=null)},b=()=>{if(a==="pomodoro"){const p=r+1;f(p),m(p%4===0?"long_break":"short_break")}else m("pomodoro")};u.useEffect(()=>{if(_(),e){const p=Date.now(),y=l;R.current=p+y*1e3,s.current=!1,i.current=!1,o.current=setInterval(()=>{const h=L(R.current,Date.now());if(h<=0){s.current||(j(),s.current=!0),Notification.permission==="granted"&&new Notification("Time's up!",{body:a==="pomodoro"?"Take a short break!":"Ready to focus? Start your next Pomodoro!"}),!i.current&&a==="pomodoro"&&(n(),i.current=!0),_(),d(0),t(!1),b();return}d(h)},1e3)}return _},[e])},N=()=>{const e=g.c(13);M();const{timeLeft:t,mode:d}=T();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l={pomodoro:"Pomodoro",short_break:"Short Break",long_break:"Long Break"},e[0]=l):l=e[0];const a=l[d];let m;e[1]===Symbol.for("react.memo_cache_sentinel")?(m=c.jsx(w,{}),e[1]=m):m=e[1];let r;e[2]!==a?(r=c.jsx(S,{variant:"label",children:a}),e[2]=a,e[3]=r):r=e[3];let f;e[4]===Symbol.for("react.memo_cache_sentinel")?(f=c.jsx(v,{}),e[4]=f):f=e[4];let n;e[5]!==r?(n=c.jsxs("div",{className:x.titleRow,children:[r,f]}),e[5]=r,e[6]=n):n=e[6];let o;e[7]!==t?(o=c.jsx(k,{time:t}),e[7]=t,e[8]=o):o=e[8];let s;e[9]===Symbol.for("react.memo_cache_sentinel")?(s=c.jsx(P,{}),e[9]=s):s=e[9];let i;return e[10]!==n||e[11]!==o?(i=c.jsxs("div",{className:x.container,children:[m,n,o,s]}),e[10]=n,e[11]=o,e[12]=i):i=e[12],i};N.__docgenInfo={description:"",methods:[],displayName:"PomodoroTimer"};export{N as P};
