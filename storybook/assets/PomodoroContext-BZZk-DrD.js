import{j as f}from"./jsx-runtime-D_zvdyIk.js";import{r as n}from"./index-BE4Fbmwm.js";const t=[];for(let o=0;o<256;++o)t.push((o+256).toString(16).slice(1));function D(o,e=0){return(t[o[e+0]]+t[o[e+1]]+t[o[e+2]]+t[o[e+3]]+"-"+t[o[e+4]]+t[o[e+5]]+"-"+t[o[e+6]]+t[o[e+7]]+"-"+t[o[e+8]]+t[o[e+9]]+"-"+t[o[e+10]]+t[o[e+11]]+t[o[e+12]]+t[o[e+13]]+t[o[e+14]]+t[o[e+15]]).toLowerCase()}let y;const N=new Uint8Array(16);function O(){if(!y){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");y=crypto.getRandomValues.bind(crypto)}return y(N)}const A=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),I={randomUUID:A};function k(o,e,i){var c;if(I.randomUUID&&!o)return I.randomUUID();o=o||{};const d=o.random??((c=o.rng)==null?void 0:c.call(o))??O();if(d.length<16)throw new Error("Random bytes length must be >= 16");return d[6]=d[6]&15|64,d[8]=d[8]&63|128,D(d)}const R=n.createContext(void 0),a={pomodoro:25*60,short_break:5*60,long_break:15*60},C="pomodoro-tasks",j=({children:o})=>{const[e,i]=n.useState("pomodoro"),[d,c]=n.useState(!1),[v,m]=n.useState(a.pomodoro),[l,x]=n.useState(()=>{const r=localStorage.getItem(C);try{return r?JSON.parse(r):[]}catch{return[]}}),[p,P]=n.useState(()=>{const r=localStorage.getItem("global-pomodoros");try{return r?JSON.parse(r):[]}catch{return[]}}),[g,b]=n.useState(0),[S,w]=n.useState(null),U=()=>{m(a[e]),c(!1)},E=r=>{i(r),m(a[r]),c(!1)},T=()=>{e==="pomodoro"&&(h(),P(u=>[...u,{id:k(),completedAt:new Date().toISOString()}]));const r=e==="pomodoro"?g+1:g;b(r);const s=e==="pomodoro"?r%4===0?"long_break":"short_break":"pomodoro";i(s),m(a[s]),c(!1)},h=()=>{S&&x(r=>r.map(s=>{if(s.id!==S)return s;const u=s.completedPomodoros+1,_=u>=s.pomodoros;return{...s,completedPomodoros:u,completed:_?!0:s.completed}}))};return n.useEffect(()=>{localStorage.setItem(C,JSON.stringify(l))},[l]),n.useEffect(()=>{localStorage.setItem("global-pomodoros",JSON.stringify(p))},[p]),f.jsx(R.Provider,{value:{mode:e,setMode:E,isRunning:d,setIsRunning:c,timeLeft:v,setTimeLeft:m,resetTimer:U,tasks:l,setTasks:x,pomodoroCount:g,setPomodoroCount:b,activeTaskId:S,setActiveTaskId:w,incrementCompletedPomodoros:h,globalPomodoros:p,setGlobalPomodoros:P,skipCycle:T},children:o})},M=()=>{const o=n.useContext(R);if(!o)throw new Error("usePomodoroContext must be used within PomodoroProvider");return o};j.__docgenInfo={description:"",methods:[],displayName:"PomodoroProvider",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};export{j as P,M as u,k as v};
